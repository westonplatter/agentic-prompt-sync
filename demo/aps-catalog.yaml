# REST API Development Catalog
# This demonstrates intelligent asset discovery for API development workflows

version: "1.0"

assets:
  # ============================================================================
  # API DESIGN & DOCUMENTATION
  # ============================================================================

  - id: openapi-design
    name: OpenAPI Spec Best Practices
    description: >-
      Rules for designing clean REST APIs with OpenAPI/Swagger specs.
      Covers endpoint naming, request/response schemas, error formats,
      pagination patterns, and versioning strategies.
    kind: cursor_rules
    category: api-design
    tags:
      - openapi
      - swagger
      - rest
      - api
      - documentation
    use_cases:
      - Designing new REST endpoints
      - Writing OpenAPI specifications
      - Documenting API contracts
    keywords:
      - endpoint
      - route
      - schema
      - swagger
      - spec
      - contract
    triggers:
      - design an api
      - create endpoint
      - write openapi spec
      - document api
      - rest api design
    source:
      type: filesystem
      root: ./rules
      path: openapi-design
    author: API Team

  # ============================================================================
  # AUTHENTICATION & SECURITY
  # ============================================================================

  - id: jwt-auth-patterns
    name: JWT Authentication Patterns
    description: >-
      Secure JWT implementation patterns including token generation,
      validation, refresh flows, and common security pitfalls to avoid.
    kind: cursor_rules
    category: security
    tags:
      - jwt
      - authentication
      - security
      - tokens
    use_cases:
      - Implementing user authentication
      - Adding JWT to an API
      - Securing endpoints
    keywords:
      - token
      - bearer
      - refresh
      - login
      - auth
      - session
    triggers:
      - add authentication
      - implement jwt
      - secure this endpoint
      - login endpoint
      - user authentication
    source:
      type: filesystem
      root: ./rules
      path: jwt-auth
    author: Security Team

  - id: api-security-review
    name: API Security Review Checklist
    description: >-
      Security review checklist for REST APIs covering OWASP API Top 10,
      input validation, rate limiting, CORS, and injection prevention.
    kind: cursor_rules
    category: security
    tags:
      - security
      - owasp
      - review
      - api
    use_cases:
      - Reviewing API code for security issues
      - Security audit before deployment
      - Checking for common vulnerabilities
    keywords:
      - injection
      - xss
      - cors
      - rate limit
      - validation
      - sanitize
    triggers:
      - review for security
      - security audit
      - check vulnerabilities
      - is this secure
    source:
      type: filesystem
      root: ./rules
      path: api-security
    author: Security Team

  # ============================================================================
  # DATABASE & PERSISTENCE
  # ============================================================================

  - id: sql-query-patterns
    name: SQL Query Best Practices
    description: >-
      Efficient and secure SQL patterns including parameterized queries,
      indexing strategies, N+1 prevention, and transaction handling.
    kind: cursor_rules
    category: database
    tags:
      - sql
      - database
      - postgres
      - mysql
      - queries
    use_cases:
      - Writing database queries
      - Optimizing slow queries
      - Preventing SQL injection
    keywords:
      - query
      - select
      - join
      - index
      - transaction
      - migration
    triggers:
      - write sql query
      - database query
      - optimize query
      - add database
    source:
      type: filesystem
      root: ./rules
      path: sql-patterns
    author: Data Team

  - id: orm-patterns
    name: ORM Best Practices
    description: >-
      Patterns for using ORMs effectively including eager/lazy loading,
      relationship mapping, and avoiding common performance pitfalls.
    kind: cursor_rules
    category: database
    tags:
      - orm
      - sqlalchemy
      - prisma
      - sequelize
      - database
    use_cases:
      - Setting up ORM models
      - Defining relationships
      - Optimizing ORM queries
    keywords:
      - model
      - relationship
      - eager
      - lazy
      - migration
    triggers:
      - create model
      - orm setup
      - define relationship
      - database model
    source:
      type: filesystem
      root: ./rules
      path: orm-patterns
    author: Backend Team

  # ============================================================================
  # ERROR HANDLING & VALIDATION
  # ============================================================================

  - id: api-error-handling
    name: API Error Handling Standards
    description: >-
      Consistent error handling patterns for REST APIs including
      error response formats, HTTP status codes, and error logging.
    kind: cursor_rules
    category: api-design
    tags:
      - errors
      - validation
      - http
      - responses
    use_cases:
      - Implementing error responses
      - Standardizing error formats
      - Adding validation to endpoints
    keywords:
      - error
      - exception
      - status code
      - 400
      - 500
      - validation
    triggers:
      - handle errors
      - error response
      - validation error
      - return error
    source:
      type: filesystem
      root: ./rules
      path: error-handling
    author: API Team

  - id: input-validation
    name: Input Validation Patterns
    description: >-
      Request validation patterns including schema validation,
      sanitization, type coercion, and custom validators.
    kind: cursor_rules
    category: validation
    tags:
      - validation
      - input
      - sanitization
      - schema
    use_cases:
      - Validating request bodies
      - Sanitizing user input
      - Schema validation
    keywords:
      - validate
      - sanitize
      - schema
      - pydantic
      - zod
      - joi
    triggers:
      - validate input
      - request validation
      - sanitize data
      - validate request body
    source:
      type: filesystem
      root: ./rules
      path: input-validation
    author: Backend Team

  # ============================================================================
  # TESTING
  # ============================================================================

  - id: api-testing
    name: API Testing Strategies
    description: >-
      Testing patterns for REST APIs including unit tests, integration tests,
      contract testing, and test data management.
    kind: cursor_rules
    category: testing
    tags:
      - testing
      - pytest
      - jest
      - integration
      - api
    use_cases:
      - Writing API tests
      - Setting up test fixtures
      - Mocking external services
    keywords:
      - test
      - mock
      - fixture
      - assert
      - integration
      - e2e
    triggers:
      - write tests
      - test this endpoint
      - add test coverage
      - integration test
    source:
      type: filesystem
      root: ./rules
      path: api-testing
    author: QA Team

  # ============================================================================
  # PERFORMANCE
  # ============================================================================

  - id: api-performance
    name: API Performance Optimization
    description: >-
      Performance patterns including caching strategies, pagination,
      query optimization, and response compression.
    kind: cursor_rules
    category: performance
    tags:
      - performance
      - caching
      - optimization
      - pagination
    use_cases:
      - Optimizing slow endpoints
      - Adding caching
      - Implementing pagination
    keywords:
      - cache
      - redis
      - pagination
      - cursor
      - offset
      - slow
    triggers:
      - optimize performance
      - add caching
      - endpoint is slow
      - implement pagination
    source:
      type: filesystem
      root: ./rules
      path: api-performance
    author: Platform Team

  # ============================================================================
  # FRAMEWORK-SPECIFIC
  # ============================================================================

  - id: fastapi-patterns
    name: FastAPI Best Practices
    description: >-
      FastAPI-specific patterns including dependency injection,
      background tasks, middleware, and async patterns.
    kind: cursor_rules
    category: framework
    tags:
      - fastapi
      - python
      - async
      - pydantic
    use_cases:
      - Building FastAPI applications
      - Using dependency injection
      - Async endpoint patterns
    keywords:
      - fastapi
      - uvicorn
      - pydantic
      - dependency
      - async
      - await
    triggers:
      - fastapi endpoint
      - python api
      - async python
      - fastapi project
    source:
      type: filesystem
      root: ./rules
      path: fastapi
    author: Python Team

  - id: express-patterns
    name: Express.js Best Practices
    description: >-
      Express.js patterns including middleware, routing, error handling,
      and security middleware configuration.
    kind: cursor_rules
    category: framework
    tags:
      - express
      - nodejs
      - javascript
      - middleware
    use_cases:
      - Building Express applications
      - Writing middleware
      - Route organization
    keywords:
      - express
      - router
      - middleware
      - node
      - app.use
    triggers:
      - express endpoint
      - node api
      - express middleware
      - express project
    source:
      type: filesystem
      root: ./rules
      path: express
    author: Node Team
